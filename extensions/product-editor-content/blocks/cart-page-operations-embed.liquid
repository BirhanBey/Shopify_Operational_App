{%- comment -%}
  App Embed: Cart Page Operations
  Injects config + loads cart page operations script
{%- endcomment -%}

<script>
  window.__EDITOR_CART_CONFIG__ = Object.assign(
    {},
    window.__EDITOR_CART_CONFIG__,
    {
      appUrl: '{{ block.settings.app_url | escape }}',
      shop: '{{ shop.permanent_domain }}',
      feeVariantId: '{{ block.settings.fee_variant_id | escape }}',
    },
  );
</script>
<script src="{{ 'cart-page-operations.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Cart Ops Embed",
  "target": "body",
  "settings": [
    {
      "type": "text",
      "id": "app_url",
      "label": "App URL",
      "info": "Your app backend URL (e.g., https://your-app.ngrok.io)"
    },
    {
      "type": "text",
      "id": "fee_variant_id",
      "label": "Fee product variant ID",
      "info": "Variant ID of the personalisation fee product (e.g., 1234567890 or gid://shopify/ProductVariant/1234567890)"
    }
  ]
}
{% endschema %}

